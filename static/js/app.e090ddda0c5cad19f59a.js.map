{"version":3,"sources":["webpack:///./src/utils/global.js","webpack:///src/views/example/404.vue","webpack:///./src/views/example/404.vue?2dbb","webpack:///./src/views/example/404.vue","webpack:///./src/App.vue?3c2d","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/main.js","webpack:///./src/router/index.js","webpack:///./src/permission.js"],"names":["global","antRouter","example_404","render","this","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","_v","Component","__webpack_require__","normalizeComponent","name","ssrContext","__webpack_exports__","selectortype_template_index_0_src_App","attrs","id","src_App","Vue","config","productionTip","use","ElementUI","el","router","components","App","template","d","fixedRouter","permissionRouter","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","layout","e","then","bind","Router","path","component","hidden","children","meta","title","roles","icon","routes","__WEBPACK_IMPORTED_MODULE_0__router__","__WEBPACK_IMPORTED_MODULE_1__views_example_404__","addRouFlag","beforeEach","to","from","next","GetRole","localStorage","getItem","getRoutes","baseRoleGetRouters","allRoutes","rightRoutes","filter","route","index","some","role","indexOf","hasPermission","length","split","push","notpage","concat","addRoutes"],"mappings":"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","file":"static/js/app.e090ddda0c5cad19f59a.js","sourcesContent":["global.antRouter = '' //全局的路由\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/global.js","<template>\r\n  <div class=\"box\"> \r\n    <h1>404</h1>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"notpage\"\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n .box{\r\n     width: 100%;\r\n     height: 100%;\r\n     background-color:pink;\r\n }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/example/404.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('h1',[_vm._v(\"404\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71907878\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/example/404.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71907878\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./404.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./404.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./404.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71907878\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./404.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-71907878\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/example/404.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a6c9005\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a6c9005\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a6c9005\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n<script>\nexport default {\n  name: 'App'\n}\n\n</script>\n<style>\nbody{\n  margin: 0;padding: 0;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport '@/utils/global'//全局\n// 控制路由表的js文件\nimport '@/permission.js'\nVue.config.productionTip = false\nVue.use(ElementUI);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nconst layout = () =>\n    import ('@/components/layout')\n    // 登录页\nconst reload = () =>\n    import ('@/components/reLoad')\n\nconst main = () =>\n    import ('@/views/index')\nconst table = () =>\n    import ('@/views/example/table/index')\nconst tree = () =>\n    import ('@/views/example/tree')\nconst tableFirst = () =>\n    import ('@/views/example/table/tableFirst')\nconst tableSecond = () =>\n    import ('@/views/example/table/tableSecond')\nconst no = () =>\n    import ('@/views/example/404')\nVue.use(Router)\n    // 固定的路由表\nexport const fixedRouter = [{\n            path: '',\n            component: reload,\n            hidden: true\n        },\n        {\n            path: '',\n            component: layout, //整体页面的布局(包含左侧菜单跟主内容区域)\n            children: [{\n                path: 'main',\n                component: main,\n                meta: {\n                    title: '首页', //菜单名称\n                    roles: ['user', 'admin'], //当前菜单哪些角色可以看到\n                    icon: 'el-icon-info' //菜单左侧的icon图标\n                }\n            }]\n        },\n        // {\n        //     path: '*',\n        //     component: no,\n        // }\n    ]\n    // 需要权限判断展示的路由\nexport const permissionRouter = [{\n    path: \"/example\",\n    component: layout,\n    name: \"Example\",\n    meta: {\n        title: \"案例\",\n        icon: \"el-icon-success\",\n        roles: ['admin', 'user']\n    },\n    children: [{\n            path: \"/example/table\",\n            name: \"Table\",\n            component: table,\n            meta: {\n                title: \"table案例\",\n                icon: \"el-icon-goods\",\n                roles: ['admin']\n            },\n            // 三级菜单写法，对应demotable案例下边的两个菜单\n            children: [{\n                    path: \"table1\",\n                    name: \"Table1\",\n                    component: tableFirst,\n                    meta: {\n                        title: \"table1\",\n                        icon: \"el-icon-mobile-phone\",\n                        roles: ['admin']\n\n                    }\n                },\n                {\n                    path: \"table2\",\n                    name: \"Table2\",\n                    component: tableSecond,\n                    meta: {\n                        title: \"table2\",\n                        icon: \"el-icon-service\",\n                        roles: ['admin']\n                    }\n                }\n            ]\n        },\n        {\n            path: \"tree\",\n            name: \"Tree\",\n            component: tree,\n            meta: {\n                title: \"树形菜单\",\n                icon: \"el-icon-upload\",\n                roles: ['user', 'admin']\n            }\n        }\n    ]\n}]\n\n\nexport default new Router({\n    routes: fixedRouter\n\n})\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// 取到需要权限判断的路由表\nimport { permissionRouter, fixedRouter } from '@/router'\nimport router from '@/router'\nimport notpage from '@/views/example/404'\nvar addRouFlag = false\n\nrouter.beforeEach((to, from, next) => {\n    // 取到用户的角色\n    let GetRole = localStorage.getItem(\"userRole\")\n\n    // 如果登录了\n    if (GetRole && GetRole !== 'unload') {\n        next() //next()方法后的代码也会执行\n            // 1.如果路由表 没根据角色进行筛选,就筛选一次\n        if (!addRouFlag) {\n            addRouFlag = true\n                // 2.根据用户的角色、和需要动态展示的路由，生成符合用户角色的路由\n            var getRoutes = baseRoleGetRouters(permissionRouter, GetRole.split(\",\"))\n                //404页面\n            getRoutes.push({\n                    path: \"*\",\n                    component: notpage,\n                    name: '404',\n                    meta: {\n                        icon: 'el-icon-mobile-phone',\n                        title: 'false'\n                    }\n                })\n                // 3.利用global属性，让渲染菜单的组件sideMeuns.vue重新生成左侧菜单\n            global.antRouter = fixedRouter.concat(getRoutes)\n                // 4.将生成好的路由addRoutes\n            router.addRoutes(fixedRouter.concat(getRoutes))\n                // 5.push之后，会重新进入到beforeEach的钩子里,直接进入第一个if判断\n            router.push({ path: to.path })\n        }\n    } else {\n        // 用户没登录，跳转到登录页面\n        if (to.path === '/') {\n            next()\n        } else {\n            next('/')\n        }\n    }\n\n})\n\n\nfunction hasPermission(route, roles) {\n    if (route.meta && route.meta.roles) {\n        return roles.some(role => route.meta.roles.indexOf(role) >= 0)\n    } else {\n        return true\n    }\n}\n// 根据用户的角色取到该用户对应的路由\nfunction baseRoleGetRouters(allRoutes, roles) {\n    // allRoutes是动态路由表\n    // roles是取到的用户角色，数组\n    // 根据权限  有对应权限时选出addrouter中正确的权限中\n\n    let rightRoutes = allRoutes.filter((route, index) => {\n        if (hasPermission(route, roles)) {\n            if (route.children && route.children.length) {\n                route.children = baseRoleGetRouters(route.children, roles)\n            }\n            return true\n        }\n        return false\n    })\n    return rightRoutes\n}\n\n\n// WEBPACK FOOTER //\n// ./src/permission.js"],"sourceRoot":""}